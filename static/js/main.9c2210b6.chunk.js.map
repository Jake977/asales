{"version":3,"sources":["img/checkmark.svg","img/aviasales_logo.svg","components/CustomCheckbox/CustomCheckbox.jsx","components/TransferFlightsFilter/TransferFlightsFilter.jsx","components/ButtonElem/ButtonElem.jsx","components/FilterButtons/FilterButtons.jsx","components/Segment/Segment.jsx","components/Ticket/Ticket.jsx","components/TicketsList/TicketsList.jsx","components/App/App.jsx"],"names":["module","exports","CheckBoxView","styled","div","Input","input","InputView","prop","size","props","checked","checkmark","CustomCheckBox","name","onChange","type","TransferFilterBlock","form","FiltersTitle","Label","label","TransferFlightsFilter","filters","isAll","Object","values","includes","key","value","Btn","button","active","ButtonElem","FilterButtonsView","FilterButtons","sortBy","onClick","SegmentView","Col","GrayText","span","BlackText","flightTimeView","time","hours","getUTCHours","minutes","getUTCMinutes","Segment","origin","destination","date","stops","duration","startFLyTime","Date","finishFlyTime","getTime","durationInMin","Math","trunc","flightDurationView","text","toString","stopsText","length","TicketView","TicketHeader","Price","TicketSegments","CarrierLogo","img","Ticket","price","carrier","segments","toLocaleString","src","alt","width","height","map","segment","Loading","EmptyResult","Tickets","applyTicketFilters","tickets","enabledFilters","keys","filter","filterKey","ticket","maxStops","reduce","acc","getFlightDuration","doSortTickets","sort","ticketA","ticketB","this","isAllLoaded","ticketsNumInList","filteredTickets","ticketsToView","slice","ticketsList","ticketId","className","React","Component","GlobalStyle","createGlobalStyle","AppStyle","Header","Content","ColLeft","ColRight","rax","App","recursiveFetch","searchId","a","axios","get","serviceURL","data","chunkData","isStop","stop","setState","prevState","onFilterChange","state","newFilters","forEach","item","onSortByChange","0","1","2","3","logo","TicketsList","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9c2210b6.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/checkmark.68ca57dc.svg\";","module.exports = __webpack_public_path__ + \"static/media/aviasales_logo.0c089234.svg\";","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport checkmark from '../../img/checkmark.svg';\n\nconst CheckBoxView = styled.div`\n  display: flex;\n  vertical-align: middle;\n`;\n\nconst Input = styled.input`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n`;\n\nconst InputView = styled.div`\n  margin-right: 10px;\n  margin-left: 20px;\n  height: ${(prop) => prop.size || '20px'};\n  width: ${(prop) => prop.size || '20px'};\n  box-sizing: border-box;\n  content: '';\n  border-radius: 2px;\n  border: 1px solid ${(props) => (props.checked ? '#2196f3' : '#9ABBCE')};\n  background-image: ${(props) => (props.checked ? `url(${checkmark})` : 'none')};\n  background-position: center center;\n  background-size: 12px 8px;\n  background-repeat: no-repeat;\n`;\n\nconst CustomCheckBox = ({ name, checked, onChange }) => (\n  <CheckBoxView>\n    <Input\n      type=\"checkbox\"\n      name={name}\n      checked={checked}\n      onChange={onChange}\n    />\n    <InputView checked={checked} />\n  </CheckBoxView>\n);\n\nCustomCheckBox.propTypes = {\n  name: PropTypes.string.isRequired,\n  checked: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default CustomCheckBox;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport CustomCheckBox from '../CustomCheckbox/CustomCheckbox';\n\n\nconst TransferFilterBlock = styled.form`\n  background: #FFFFFF;\n  min-width: 232px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px 0px;\n`;\n\nconst FiltersTitle = styled.div`\n  text-align: center;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  line-height: 12px;\n  margin-bottom: 20px;\n  margin-top: 0;\n  text-transform: uppercase;\n`;\n\nconst Label = styled.label`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 40px;\n  color: #4a4a4a;\n  font-size: 13px;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 20px;\n  cursor: pointer;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  &:hover {\n    background: #F1FCFF;\n  }  \n`;\n\nconst TransferFlightsFilter = ({ onChange, filters }) => {\n  const isAll = !Object.values(filters).includes(false);\n  return (\n    <TransferFilterBlock>\n      <FiltersTitle>Количество пересадок</FiltersTitle>\n      <Label key=\"all\">\n        <CustomCheckBox\n          name=\"transfer\"\n          value=\"all\"\n          checked={isAll}\n          onChange={() => onChange('all')}\n        />\n        Все\n      </Label>\n      <Label key=\"noTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters[0]}\n          onChange={() => onChange('0')}\n        />\n        Без пересадок\n      </Label>\n      <Label key=\"oneTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters[1]}\n          onChange={() => onChange('1')}\n        />\n        1 пересадка\n      </Label>\n      <Label key=\"twoTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters[2]}\n          onChange={() => onChange('2')}\n        />\n        2 пересадки\n      </Label>\n      <Label key=\"threeTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters[3]}\n          onChange={() => onChange('3')}\n        />\n        3 пересадки\n      </Label>\n    </TransferFilterBlock>\n  );\n};\n\nTransferFlightsFilter.propTypes = {\n  filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default TransferFlightsFilter;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\n\nconst Btn = styled.button`\n  flex-grow: 1;\n  cursor: pointer;\n  text-align: center;\n  font-size: 12px;\n  text-transform: uppercase;\n  padding: 15px 0px;\n  justify-content: center;\n  color: ${(props) => (props.active ? '#fff' : '#4a4a4a')};\n  background-color: ${(props) => (props.active ? '#2196f3' : '#fff')};\n  border: 1px solid ${(props) => (props.active ? '#2196f3' : '#dfe5ec')};\n`;\n\nconst ButtonElem = (props) => <Btn {...props} />;\n\nButtonElem.propTypes = {\n  active: PropTypes.bool.isRequired,\n};\n\nexport default ButtonElem;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport ButtonElem from '../ButtonElem/ButtonElem';\n\n\nconst FilterButtonsView = styled.div`\n  display: flex;\n  flex-direction: row;\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n  border-radius: 5px;\n`;\n\nconst FilterButtons = ({ sortBy, onChange }) => (\n  <FilterButtonsView>\n    <ButtonElem\n      type=\"button\"\n      active={sortBy === 'price'}\n      onClick={() => (onChange('price'))}\n    >\n      Самый дешевый\n    </ButtonElem>\n    <ButtonElem\n      type=\"button\"\n      active={sortBy === 'duration'}\n      onClick={() => (onChange('duration'))}\n    >\n      Самый быстрый\n    </ButtonElem>\n  </FilterButtonsView>\n);\n\nFilterButtons.propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default FilterButtons;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\n\nconst SegmentView = styled.div`\n  padding-top: 10px;\n  display: flex;\n  flex-direction: row;\n  font-weight: 600;\n`;\n\nconst Col = styled.div`\n  width: 33.3333%;\n`;\n\nconst GrayText = styled.span`\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.5px;\n  color: #A0B0B9;\n  text-transform: uppercase;\n`;\n\nconst BlackText = styled.span`\n  font-size: 14px;\n  line-height: 21px;\n  color: #4A4A4A;\n`;\n\nconst flightDurationView = (durationInMin) => {\n  const hours = Math.trunc(durationInMin / 60);\n  const minutes = durationInMin - hours * 60;\n  return `${hours < 10 ? `0${hours}` : hours}ч`\n    + ` ${minutes < 10 ? `0${minutes}` : minutes}м`;\n};\n\nconst flightTimeView = (time) => {\n  const hours = time.getUTCHours();\n  const minutes = time.getUTCMinutes();\n  return `${hours < 10 ? `0${hours}` : hours}:`\n    + `${minutes < 10 ? `0${minutes}` : minutes}`;\n};\n\nconst stopsText = (stops) => {\n  let text = '';\n  switch (stops.toString()) {\n    case '1':\n      text = 'пересадка';\n      break;\n    case '2':\n    case '3':\n    case '4':\n      text = 'пересадки';\n      break;\n    default:\n      text = 'пересадок';\n      break;\n  }\n  return (stops > 0) ? `${stops} ${text}` : `Без ${text}`;\n};\n\nconst Segment = ({\n  origin,\n  destination,\n  date,\n  stops,\n  duration,\n}) => {\n  const startFLyTime = new Date(date);\n  const finishFlyTime = new Date(startFLyTime.getTime() + duration * 60 * 1000);\n\n  return (\n    <SegmentView>\n      <Col>\n        <GrayText>\n          {`${origin} - ${destination} `}\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${flightTimeView(startFLyTime)} - ${flightTimeView(finishFlyTime)}`}\n        </BlackText>\n      </Col>\n      <Col>\n        <GrayText>\n          В ПУТИ\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${flightDurationView(duration)}`}\n        </BlackText>\n      </Col>\n      <Col>\n        <GrayText>\n          {`${stopsText(stops.length)}`}\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${stops}`}\n        </BlackText>\n      </Col>\n    </SegmentView>\n  );\n};\n\nSegment.propTypes = {\n  origin: PropTypes.string.isRequired,\n  destination: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n  stops: PropTypes.arrayOf(PropTypes.string).isRequired,\n  duration: PropTypes.number.isRequired,\n};\n\nexport default Segment;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport Segment from '../Segment/Segment';\n\nconst TicketView = styled.div`\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px;\n  margin-bottom: 20px;\n`;\n\nconst TicketHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Price = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 24px;\n  color: #2196F3;\n`;\n\nconst TicketSegments = styled.div``;\n\nconst CarrierLogo = styled.img`\n  margin-right: 30px;\n`;\n\nconst Ticket = ({ price, carrier, segments }) => (\n  <TicketView>\n    <TicketHeader>\n      <Price>{`${price.toLocaleString()} Р`}</Price>\n      <CarrierLogo\n        src={`https://pics.avs.io/99/36/${carrier}.png`}\n        alt={`Carrier ${carrier}`}\n        width=\"99\"\n        height=\"36\"\n      />\n    </TicketHeader>\n    <TicketSegments>\n      {segments.map((segment) => (\n        <Segment\n          key={`${segment.date}`}\n          {...segment}\n        />\n      ))}\n    </TicketSegments>\n  </TicketView>\n);\n\nTicket.propTypes = {\n  price: PropTypes.number.isRequired,\n  carrier: PropTypes.string.isRequired,\n  segments: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default Ticket;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport Ticket from '../Ticket/Ticket';\n\nconst Loading = styled.div`\n  width: 502px;\n  height: 50px;\n  text-align: center;\n`;\n\nconst EmptyResult = styled.div`\n  width: 502px;\n  height: 50px;\n  text-align: center;\n`;\n\nclass Tickets extends React.Component {\n  applyTicketFilters = (tickets) => {\n    const { filters } = this.props;\n    const enabledFilters = Object.keys(filters).filter((filterKey) => filters[filterKey]);\n    return tickets.filter((ticket) => {\n      const { segments } = ticket;\n      const maxStops = segments.reduce((acc, segment) => (\n        acc < segment.stops.length ? segment.stops.length : acc\n      ), 0);\n      return enabledFilters.includes(maxStops.toString());\n    });\n  };\n\n  getFlightDuration = ({ segments }) => segments.reduce((acc, { duration }) => (acc + duration), 0);\n\n  doSortTickets = (tickets) => {\n    const { sortBy } = this.props;\n    return tickets.sort((ticketA, ticketB) => {\n      if (sortBy === 'price') {\n        return ticketA.price - ticketB.price;\n      }\n      if (sortBy === 'duration') {\n        const durationA = this.getFlightDuration(ticketA);\n        const durationB = this.getFlightDuration(ticketB);\n        return durationA - durationB;\n      }\n    });\n  };\n\n  render() {\n    const { isAllLoaded, tickets, ticketsNumInList } = this.props;\n    const filteredTickets = this.applyTicketFilters(tickets);\n    const sortedTickets = this.doSortTickets(filteredTickets);\n    const ticketsToView = sortedTickets.slice(0, ticketsNumInList);\n\n    const ticketsList = (ticketsToView.length > 0) ? ticketsToView.map((ticket) => {\n      const { price, carrier, segments } = ticket;\n      const ticketId = `${segments[0].date}${price}`;\n      return (\n        <Ticket\n          key={ticketId}\n          price={price}\n          carrier={carrier}\n          segments={segments}\n          className=\"ticket\"\n        />\n      );\n    }) : <EmptyResult>Ничего не найдено</EmptyResult>;\n\n    const loadingMessage = <Loading>Loading...</Loading>;\n    return isAllLoaded ? ticketsList : loadingMessage;\n  }\n}\n\nTickets.propTypes = {\n  ticketsNumInList: PropTypes.number.isRequired,\n  filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  tickets: PropTypes.arrayOf(PropTypes.object).isRequired,\n  sortBy: PropTypes.string.isRequired,\n  isAllLoaded: PropTypes.bool.isRequired,\n};\n\nexport default Tickets;\n","import React from 'react';\nimport * as rax from 'retry-axios';\nimport axios from 'axios';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport * as ReactDOM from 'react-dom';\n\nimport TransferFlightsFilter from '../TransferFlightsFilter/TransferFlightsFilter';\nimport FilterButtons from '../FilterButtons/FilterButtons';\nimport TicketsList from '../TicketsList/TicketsList';\nimport logo from '../../img/aviasales_logo.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Open Sans, sans-serif;\n    background-color: #f3f7fa;\n    margin: 0;\n    padding: 0; \n  }\n`;\n\nconst AppStyle = styled.div`\n  margin: 0 auto;\n  padding: 0 10px;\n  padding-bottom: 30px;\n  width: 750px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 160px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding: 5px;\n`;\n\nconst ColLeft = styled.div`\n  display: flex;\n  width: 235px;\n  margin-right: 20px;\n`;\n\nconst ColRight = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\nrax.attach();\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isAllLoaded: false,\n      tickets: [],\n      sortBy: 'price', // duration\n      filters: {\n        0: true,\n        1: true,\n        2: true,\n        3: true,\n      },\n    };\n    this.serviceURL = 'https://front-test.beta.aviasales.ru';\n    this.ticketsNumInList = 5;\n  }\n\n  async componentDidMount() {\n    try {\n      const { data } = await axios.get(`${this.serviceURL}/search`);\n      await this.recursiveFetch(data.searchId);\n    } catch (error) {\n      return error;\n    }\n  }\n\n  recursiveFetch = async (searchId) => {\n    try {\n      const { data } = await axios.get(`${this.serviceURL}/tickets?searchId=${searchId}`);\n      const chunkData = data.tickets;\n      const isStop = data.stop;\n\n      this.setState((prevState) => ({\n        isAllLoaded: isStop,\n        tickets: [...prevState.tickets, ...chunkData],\n      }));\n\n      if (!isStop) {\n        await this.recursiveFetch(searchId);\n      }\n    } catch (error) {\n      return error;\n    }\n  };\n\n  onFilterChange = (value) => {\n    const { filters } = this.state;\n    const newFilters = { ...filters };\n    if (value === 'all') {\n      const isAll = Object.values(filters).includes(false);\n      Object.keys(filters).forEach((item) => {\n        newFilters[item] = isAll;\n      });\n    } else {\n      newFilters[value] = !filters[value];\n    }\n    this.setState({ filters: newFilters });\n  };\n\n  onSortByChange = (value) => {\n    this.setState({ sortBy: value });\n  };\n\n  render() {\n    const {\n      isAllLoaded,\n      tickets,\n      filters,\n      sortBy,\n    } = this.state;\n    return (\n      <AppStyle>\n        <GlobalStyle />\n        <Header>\n          <img alt=\"Aviasales\" src={logo} width=\"80\" height=\"80\" />\n        </Header>\n        <Content>\n          <ColLeft>\n            <TransferFlightsFilter\n              onChange={this.onFilterChange}\n              filters={filters}\n            />\n          </ColLeft>\n          <ColRight>\n            <FilterButtons\n              onChange={this.onSortByChange}\n              sortBy={sortBy}\n            />\n            <TicketsList\n              isAllLoaded={isAllLoaded}\n              tickets={tickets}\n              filters={filters}\n              sortBy={sortBy}\n              ticketsNumInList={this.ticketsNumInList}\n            />\n          </ColRight>\n        </Content>\n      </AppStyle>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}