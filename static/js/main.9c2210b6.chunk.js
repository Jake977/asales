(this.webpackJsonpasales=this.webpackJsonpasales||[]).push([[0],{27:function(n,e,t){n.exports=t.p+"static/media/checkmark.68ca57dc.svg"},31:function(n,e,t){n.exports=t.p+"static/media/aviasales_logo.0c089234.svg"},33:function(n,e,t){n.exports=t(57)},34:function(n,e,t){},57:function(n,e,t){"use strict";t.r(e);t(34);var r=t(32),a=t(5),c=t.n(a),i=t(13),o=t(11),u=t(6),l=t(7),s=t(10),f=t(9),p=t(1),d=t(0),b=t.n(d),m=t(25),h=t(4),g=t.n(h),v=t(2),x=t(26),k=t(27),E=t.n(k);function y(){var n=Object(p.a)(["\n  margin-right: 10px;\n  margin-left: 20px;\n  height: ",";\n  width: ",";\n  box-sizing: border-box;\n  content: '';\n  border-radius: 2px;\n  border: 1px solid ",";\n  background-image: ",";\n  background-position: center center;\n  background-size: 12px 8px;\n  background-repeat: no-repeat;\n"]);return y=function(){return n},n}function j(){var n=Object(p.a)(["\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n"]);return j=function(){return n},n}function O(){var n=Object(p.a)(["\n  display: flex;\n  vertical-align: middle;\n"]);return O=function(){return n},n}var w=v.b.div(O()),F=v.b.input(j()),C=v.b.div(y(),(function(n){return n.size||"20px"}),(function(n){return n.size||"20px"}),(function(n){return n.checked?"#2196f3":"#9ABBCE"}),(function(n){return n.checked?"url(".concat(E.a,")"):"none"})),B=function(n){var e=n.name,t=n.checked,r=n.onChange;return b.a.createElement(w,null,b.a.createElement(F,{type:"checkbox",name:e,checked:t,onChange:r}),b.a.createElement(C,{checked:t}))};function L(){var n=Object(p.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 40px;\n  color: #4a4a4a;\n  font-size: 13px;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 20px;\n  cursor: pointer;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  &:hover {\n    background: #F1FCFF;\n  }  \n"]);return L=function(){return n},n}function A(){var n=Object(p.a)(["\n  text-align: center;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  line-height: 12px;\n  margin-bottom: 20px;\n  margin-top: 0;\n  text-transform: uppercase;\n"]);return A=function(){return n},n}function z(){var n=Object(p.a)(["\n  background: #FFFFFF;\n  min-width: 232px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px 0px;\n"]);return z=function(){return n},n}var S=v.b.form(z()),T=v.b.div(A()),I=v.b.label(L()),D=function(n){var e=n.onChange,t=n.filters,r=!Object.values(t).includes(!1);return b.a.createElement(S,null,b.a.createElement(T,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),b.a.createElement(I,{key:"all"},b.a.createElement(B,{name:"transfer",value:"all",checked:r,onChange:function(){return e("all")}}),"\u0412\u0441\u0435"),b.a.createElement(I,{key:"noTransfer"},b.a.createElement(B,{name:"transfer",checked:t[0],onChange:function(){return e("0")}}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),b.a.createElement(I,{key:"oneTransfer"},b.a.createElement(B,{name:"transfer",checked:t[1],onChange:function(){return e("1")}}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"),b.a.createElement(I,{key:"twoTransfer"},b.a.createElement(B,{name:"transfer",checked:t[2],onChange:function(){return e("2")}}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"),b.a.createElement(I,{key:"threeTransfer"},b.a.createElement(B,{name:"transfer",checked:t[3],onChange:function(){return e("3")}}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))};function N(){var n=Object(p.a)(["\n  flex-grow: 1;\n  cursor: pointer;\n  text-align: center;\n  font-size: 12px;\n  text-transform: uppercase;\n  padding: 15px 0px;\n  justify-content: center;\n  color: ",";\n  background-color: ",";\n  border: 1px solid ",";\n"]);return N=function(){return n},n}var U=v.b.button(N(),(function(n){return n.active?"#fff":"#4a4a4a"}),(function(n){return n.active?"#2196f3":"#fff"}),(function(n){return n.active?"#2196f3":"#dfe5ec"})),M=function(n){return b.a.createElement(U,n)};function R(){var n=Object(p.a)(["\n  display: flex;\n  flex-direction: row;\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n  border-radius: 5px;\n"]);return R=function(){return n},n}var J=v.b.div(R()),H=function(n){var e=n.sortBy,t=n.onChange;return b.a.createElement(J,null,b.a.createElement(M,{type:"button",active:"price"===e,onClick:function(){return t("price")}},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),b.a.createElement(M,{type:"button",active:"duration"===e,onClick:function(){return t("duration")}},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))};function _(){var n=Object(p.a)(["\n  font-size: 14px;\n  line-height: 21px;\n  color: #4A4A4A;\n"]);return _=function(){return n},n}function q(){var n=Object(p.a)(["\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.5px;\n  color: #A0B0B9;\n  text-transform: uppercase;\n"]);return q=function(){return n},n}function G(){var n=Object(p.a)(["\n  width: 33.3333%;\n"]);return G=function(){return n},n}function K(){var n=Object(p.a)(["\n  padding-top: 10px;\n  display: flex;\n  flex-direction: row;\n  font-weight: 600;\n"]);return K=function(){return n},n}var P=v.b.div(K()),Q=v.b.div(G()),V=v.b.span(q()),W=v.b.span(_()),X=function(n){var e=n.getUTCHours(),t=n.getUTCMinutes();return"".concat(e<10?"0".concat(e):e,":")+"".concat(t<10?"0".concat(t):t)},Y=function(n){var e=n.origin,t=n.destination,r=n.date,a=n.stops,c=n.duration,i=new Date(r),o=new Date(i.getTime()+60*c*1e3);return b.a.createElement(P,null,b.a.createElement(Q,null,b.a.createElement(V,null,"".concat(e," - ").concat(t," ")),b.a.createElement("br",null),b.a.createElement(W,null,"".concat(X(i)," - ").concat(X(o)))),b.a.createElement(Q,null,b.a.createElement(V,null,"\u0412 \u041f\u0423\u0422\u0418"),b.a.createElement("br",null),b.a.createElement(W,null,"".concat(function(n){var e=Math.trunc(n/60),t=n-60*e;return"".concat(e<10?"0".concat(e):e,"\u0447")+" ".concat(t<10?"0".concat(t):t,"\u043c")}(c)))),b.a.createElement(Q,null,b.a.createElement(V,null,"".concat(function(n){var e="";switch(n.toString()){case"1":e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";break;case"2":case"3":case"4":e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";break;default:e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}return n>0?"".concat(n," ").concat(e):"\u0411\u0435\u0437 ".concat(e)}(a.length))),b.a.createElement("br",null),b.a.createElement(W,null,"".concat(a))))};function Z(){var n=Object(p.a)(["\n  margin-right: 30px;\n"]);return Z=function(){return n},n}function $(){var n=Object(p.a)([""]);return $=function(){return n},n}function nn(){var n=Object(p.a)(["\n  font-style: normal;\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 24px;\n  color: #2196F3;\n"]);return nn=function(){return n},n}function en(){var n=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return en=function(){return n},n}function tn(){var n=Object(p.a)(["\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px;\n  margin-bottom: 20px;\n"]);return tn=function(){return n},n}var rn=v.b.div(tn()),an=v.b.div(en()),cn=v.b.div(nn()),on=v.b.div($()),un=v.b.img(Z()),ln=function(n){var e=n.price,t=n.carrier,r=n.segments;return b.a.createElement(rn,null,b.a.createElement(an,null,b.a.createElement(cn,null,"".concat(e.toLocaleString()," \u0420")),b.a.createElement(un,{src:"https://pics.avs.io/99/36/".concat(t,".png"),alt:"Carrier ".concat(t),width:"99",height:"36"})),b.a.createElement(on,null,r.map((function(n){return b.a.createElement(Y,Object.assign({key:"".concat(n.date)},n))}))))};function sn(){var n=Object(p.a)(["\n  width: 502px;\n  height: 50px;\n  text-align: center;\n"]);return sn=function(){return n},n}function fn(){var n=Object(p.a)(["\n  width: 502px;\n  height: 50px;\n  text-align: center;\n"]);return fn=function(){return n},n}var pn=v.b.div(fn()),dn=v.b.div(sn()),bn=function(n){Object(s.a)(t,n);var e=Object(f.a)(t);function t(){var n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=e.call.apply(e,[this].concat(a))).applyTicketFilters=function(e){var t=n.props.filters,r=Object.keys(t).filter((function(n){return t[n]}));return e.filter((function(n){var e=n.segments.reduce((function(n,e){return n<e.stops.length?e.stops.length:n}),0);return r.includes(e.toString())}))},n.getFlightDuration=function(n){return n.segments.reduce((function(n,e){return n+e.duration}),0)},n.doSortTickets=function(e){var t=n.props.sortBy;return e.sort((function(e,r){return"price"===t?e.price-r.price:"duration"===t?n.getFlightDuration(e)-n.getFlightDuration(r):void 0}))},n}return Object(l.a)(t,[{key:"render",value:function(){var n=this.props,e=n.isAllLoaded,t=n.tickets,r=n.ticketsNumInList,a=this.applyTicketFilters(t),c=this.doSortTickets(a).slice(0,r),i=c.length>0?c.map((function(n){var e=n.price,t=n.carrier,r=n.segments,a="".concat(r[0].date).concat(e);return b.a.createElement(ln,{key:a,price:e,carrier:t,segments:r,className:"ticket"})})):b.a.createElement(dn,null,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");return e?i:b.a.createElement(pn,null,"Loading...")}}]),t}(b.a.Component),mn=t(31),hn=t.n(mn);function gn(){var n=Object(p.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"]);return gn=function(){return n},n}function vn(){var n=Object(p.a)(["\n  display: flex;\n  width: 235px;\n  margin-right: 20px;\n"]);return vn=function(){return n},n}function xn(){var n=Object(p.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 5px;\n"]);return xn=function(){return n},n}function kn(){var n=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 160px;\n"]);return kn=function(){return n},n}function En(){var n=Object(p.a)(["\n  margin: 0 auto;\n  padding: 0 10px;\n  padding-bottom: 30px;\n  width: 750px;\n"]);return En=function(){return n},n}function yn(){var n=Object(p.a)(["\n  body {\n    font-family: Open Sans, sans-serif;\n    background-color: #f3f7fa;\n    margin: 0;\n    padding: 0; \n  }\n"]);return yn=function(){return n},n}var jn=Object(v.a)(yn()),On=v.b.div(En()),wn=v.b.div(kn()),Fn=v.b.div(xn()),Cn=v.b.div(vn()),Bn=v.b.div(gn());m.a();var Ln=function(n){Object(s.a)(t,n);var e=Object(f.a)(t);function t(n){var a;return Object(u.a)(this,t),(a=e.call(this,n)).recursiveFetch=function(){var n=Object(o.a)(c.a.mark((function n(e){var t,r,o,u;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get("".concat(a.serviceURL,"/tickets?searchId=").concat(e));case 3:if(t=n.sent,r=t.data,o=r.tickets,u=r.stop,a.setState((function(n){return{isAllLoaded:u,tickets:[].concat(Object(i.a)(n.tickets),Object(i.a)(o))}})),u){n.next=11;break}return n.next=11,a.recursiveFetch(e);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(0),n.abrupt("return",n.t0);case 16:case"end":return n.stop()}}),n,null,[[0,13]])})));return function(e){return n.apply(this,arguments)}}(),a.onFilterChange=function(n){var e=a.state.filters,t=Object(r.a)({},e);if("all"===n){var c=Object.values(e).includes(!1);Object.keys(e).forEach((function(n){t[n]=c}))}else t[n]=!e[n];a.setState({filters:t})},a.onSortByChange=function(n){a.setState({sortBy:n})},a.state={isAllLoaded:!1,tickets:[],sortBy:"price",filters:{0:!0,1:!0,2:!0,3:!0}},a.serviceURL="https://front-test.beta.aviasales.ru",a.ticketsNumInList=5,a}return Object(l.a)(t,[{key:"componentDidMount",value:function(){var n=Object(o.a)(c.a.mark((function n(){var e,t;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,g.a.get("".concat(this.serviceURL,"/search"));case 3:return e=n.sent,t=e.data,n.next=7,this.recursiveFetch(t.searchId);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n.catch(0),n.abrupt("return",n.t0);case 12:case"end":return n.stop()}}),n,this,[[0,9]])})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this.state,e=n.isAllLoaded,t=n.tickets,r=n.filters,a=n.sortBy;return b.a.createElement(On,null,b.a.createElement(jn,null),b.a.createElement(wn,null,b.a.createElement("img",{alt:"Aviasales",src:hn.a,width:"80",height:"80"})),b.a.createElement(Fn,null,b.a.createElement(Cn,null,b.a.createElement(D,{onChange:this.onFilterChange,filters:r})),b.a.createElement(Bn,null,b.a.createElement(H,{onChange:this.onSortByChange,sortBy:a}),b.a.createElement(bn,{isAllLoaded:e,tickets:t,filters:r,sortBy:a,ticketsNumInList:this.ticketsNumInList}))))}}]),t}(b.a.Component);x.render(b.a.createElement(Ln,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.9c2210b6.chunk.js.map