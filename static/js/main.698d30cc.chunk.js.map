{"version":3,"sources":["img/checkmark.svg","img/aviasales_logo.svg","services/TicketService/TicketService.js","components/CustomCheckbox/CustomCheckbox.jsx","components/TransferFlightsFilter/TransferFlightsFilter.jsx","components/ButtonElem/ButtonElem.jsx","components/FilterButtons/FilterButtons.jsx","components/Ticket/Segment/Segment.jsx","components/Ticket/Ticket.jsx","components/TicketsList/TicketsList.jsx","components/App/App.jsx"],"names":["module","exports","rax","TicketService","serviceURL","recursiveFetch","searchId","onLoadStateUpdate","a","getDataChunk","data","chunkData","tickets","isStop","stop","axios","this","CheckBoxView","styled","div","Input","input","InputView","prop","size","props","checked","checkmark","CustomCheckBox","name","onChange","type","TransferFilterBlock","form","FiltersTitle","Label","label","TransferFlightsFilter","filters","isAll","Object","values","includes","key","value","noTransfer","oneTransfer","twoTransfers","threeTransfers","Btn","button","active","btnPos","ButtonElem","FilterButtonsView","FilterButtons","sortBy","sortVariants","PRICE","onClick","DURATION","SegmentView","Col","GrayText","span","BlackText","flightTimeView","time","hours","getUTCHours","minutes","getUTCMinutes","Segment","origin","destination","date","stops","duration","startFLyTime","Date","finishFlyTime","getTime","durationInMin","Math","trunc","flightDurationView","text","toString","stopsText","length","TicketView","TicketHeader","Price","TicketSegments","CarrierLogo","img","Ticket","price","carrier","segments","toLocaleString","src","alt","width","height","map","segment","PlaceHolder","Tickets","applyTicketFilters","enabledFiltersArray","elem","index","filter","ticket","maxStops","reduce","acc","getFlightDuration","doSortTickets","sort","ticketA","ticketB","isAllLoaded","ticketsNumInList","filteredTickets","ticketsToView","slice","ticketsList","ticketId","className","React","Component","GlobalStyle","createGlobalStyle","AppStyle","Header","Content","ColLeft","ColRight","App","setState","prevState","onFilterChange","state","newFilters","keys","forEach","item","onSortByChange","service","getSearchId","SearchId","logo","TicketsList","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.698d30cc.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/checkmark.68ca57dc.svg\";","module.exports = __webpack_public_path__ + \"static/media/aviasales_logo.0c089234.svg\";","import * as rax from 'retry-axios';\nimport axios from 'axios';\n\nrax.attach();\n\nexport default class TicketService {\n  serviceURL = 'https://front-test.beta.aviasales.ru';\n\n  async getSearchId() {\n    const { data } = await axios(`${this.serviceURL}/search`);\n    return data.searchId;\n  }\n\n  async getDataChunk(searchId) {\n    const { data } = await axios(`${this.serviceURL}/tickets?searchId=${searchId}`);\n    return data;\n  }\n\n  recursiveFetch = async (searchId, onLoadStateUpdate) => {\n    try {\n      const data = await this.getDataChunk(searchId);\n      const chunkData = data.tickets;\n      const isStop = data.stop;\n      onLoadStateUpdate(chunkData, isStop);\n      if (!isStop) {\n        await this.recursiveFetch(searchId, onLoadStateUpdate);\n      }\n    } catch (error) {\n      return error;\n    }\n  };\n}\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport checkmark from '../../img/checkmark.svg';\n\nconst CheckBoxView = styled.div`\n  display: flex;\n  vertical-align: middle;\n`;\n\nconst Input = styled.input`\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n`;\n\nconst InputView = styled.div`\n  margin-right: 10px;\n  margin-left: 20px;\n  height: ${(prop) => prop.size || '20px'};\n  width: ${(prop) => prop.size || '20px'};\n  box-sizing: border-box;\n  content: '';\n  border-radius: 2px;\n  border: 1px solid ${(props) => (props.checked ? '#2196f3' : '#9ABBCE')};\n  background-image: ${(props) => (props.checked ? `url(${checkmark})` : 'none')};\n  background-position: center center;\n  background-size: 12px 8px;\n  background-repeat: no-repeat;\n`;\n\nconst CustomCheckBox = ({ name, checked, onChange }) => (\n  <CheckBoxView>\n    <Input\n      type=\"checkbox\"\n      name={name}\n      checked={checked}\n      onChange={onChange}\n    />\n    <InputView checked={checked} />\n  </CheckBoxView>\n);\n\nCustomCheckBox.propTypes = {\n  name: PropTypes.string.isRequired,\n  checked: PropTypes.bool.isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default CustomCheckBox;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport CustomCheckBox from '../CustomCheckbox/CustomCheckbox';\n\nconst TransferFilterBlock = styled.form`\n  background: #FFFFFF;\n  min-width: 232px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px 0px;\n`;\n\nconst FiltersTitle = styled.div`\n  text-align: center;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  line-height: 12px;\n  margin-bottom: 20px;\n  margin-top: 0;\n  text-transform: uppercase;\n`;\n\nconst Label = styled.label`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 40px;\n  color: #4a4a4a;\n  font-size: 13px;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 20px;\n  cursor: pointer;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  &:hover {\n    background: #F1FCFF;\n  }  \n`;\n\nconst TransferFlightsFilter = ({ onChange, filters }) => {\n  const isAll = !Object.values(filters).includes(false);\n  return (\n    <TransferFilterBlock>\n      <FiltersTitle>Количество пересадок</FiltersTitle>\n      <Label key=\"all\">\n        <CustomCheckBox\n          name=\"transfer\"\n          value=\"all\"\n          checked={isAll}\n          onChange={() => onChange('all')}\n        />\n        Все\n      </Label>\n      <Label key=\"noTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters.noTransfer}\n          onChange={() => onChange('noTransfer')}\n        />\n        Без пересадок\n      </Label>\n      <Label key=\"oneTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters.oneTransfer}\n          onChange={() => onChange('oneTransfer')}\n        />\n        1 пересадка\n      </Label>\n      <Label key=\"twoTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters.twoTransfers}\n          onChange={() => onChange('twoTransfers')}\n        />\n        2 пересадки\n      </Label>\n      <Label key=\"threeTransfer\">\n        <CustomCheckBox\n          name=\"transfer\"\n          checked={filters.threeTransfers}\n          onChange={() => onChange('threeTransfers')}\n        />\n        3 пересадки\n      </Label>\n    </TransferFilterBlock>\n  );\n};\n\nTransferFlightsFilter.propTypes = {\n  filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  onChange: PropTypes.func.isRequired,\n};\n\nexport default TransferFlightsFilter;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\n\nconst Btn = styled.button`\n  flex-grow: 1;\n  cursor: pointer;\n  text-align: center;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  line-height: 20px;\n  padding: 15px 0px;\n  letter-spacing: 0.5px;\n  justify-content: center;\n  color: ${(props) => (props.active ? '#fff' : '#4a4a4a')};\n  background-color: ${(props) => (props.active ? '#2196f3' : '#fff')};\n  border: 1px solid ${(props) => (props.active ? '#2196f3' : '#dfe5ec')};\n  border-radius: ${(props) => (props.btnPos === 1 ? '5px 0 0 5px' : '0 5px 5px 0')};;\n`;\n\nconst ButtonElem = (props) => <Btn {...props} />;\n\nButtonElem.propTypes = {\n  btnPos: PropTypes.number.isRequired,\n  active: PropTypes.bool.isRequired,\n};\n\nexport default ButtonElem;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport ButtonElem from '../ButtonElem/ButtonElem';\n\nconst FilterButtonsView = styled.div`\n  display: flex;\n  flex-direction: row;\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n  border-radius: 5px;\n`;\n\nconst FilterButtons = ({ sortBy, onChange, sortVariants }) => (\n  <FilterButtonsView>\n    <ButtonElem\n      type=\"button\"\n      btnPos={1}\n      active={sortBy === sortVariants.PRICE}\n      onClick={() => (onChange(sortVariants.PRICE))}\n    >\n      Самый дешевый\n    </ButtonElem>\n    <ButtonElem\n      type=\"button\"\n      btnPos={2}\n      active={sortBy === sortVariants.DURATION}\n      onClick={() => (onChange(sortVariants.DURATION))}\n    >\n      Самый быстрый\n    </ButtonElem>\n  </FilterButtonsView>\n);\n\nFilterButtons.propTypes = {\n  sortBy: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  sortVariants: PropTypes.objectOf(PropTypes.string).isRequired,\n};\n\nexport default FilterButtons;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\n\nconst SegmentView = styled.div`\n  padding-top: 10px;\n  display: flex;\n  flex-direction: row;\n  font-weight: 600;\n`;\n\nconst Col = styled.div`\n  width: 33.3333%;\n`;\n\nconst GrayText = styled.span`\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.5px;\n  color: #A0B0B9;\n  text-transform: uppercase;\n`;\n\nconst BlackText = styled.span`\n  font-size: 14px;\n  line-height: 21px;\n  color: #4A4A4A;\n`;\n\nconst flightDurationView = (durationInMin) => {\n  const hours = Math.trunc(durationInMin / 60);\n  const minutes = durationInMin - hours * 60;\n  return `${hours < 10 ? `0${hours}` : hours}ч`\n    + ` ${minutes < 10 ? `0${minutes}` : minutes}м`;\n};\n\nconst flightTimeView = (time) => {\n  const hours = time.getUTCHours();\n  const minutes = time.getUTCMinutes();\n  return `${hours < 10 ? `0${hours}` : hours}:`\n    + `${minutes < 10 ? `0${minutes}` : minutes}`;\n};\n\nconst stopsText = (stops) => {\n  let text = '';\n  switch (stops.toString()) {\n    case '1':\n      text = 'пересадка';\n      break;\n    case '2':\n    case '3':\n    case '4':\n      text = 'пересадки';\n      break;\n    default:\n      text = 'пересадок';\n      break;\n  }\n  return (stops > 0) ? `${stops} ${text}` : `Без ${text}`;\n};\n\nconst Segment = ({\n  origin,\n  destination,\n  date,\n  stops,\n  duration,\n}) => {\n  const startFLyTime = new Date(date);\n  const finishFlyTime = new Date(startFLyTime.getTime() + duration * 60 * 1000);\n\n  return (\n    <SegmentView>\n      <Col>\n        <GrayText>\n          {`${origin} - ${destination} `}\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${flightTimeView(startFLyTime)} - ${flightTimeView(finishFlyTime)}`}\n        </BlackText>\n      </Col>\n      <Col>\n        <GrayText>\n          В ПУТИ\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${flightDurationView(duration)}`}\n        </BlackText>\n      </Col>\n      <Col>\n        <GrayText>\n          {`${stopsText(stops.length)}`}\n        </GrayText>\n        <br />\n        <BlackText>\n          {`${stops}`}\n        </BlackText>\n      </Col>\n    </SegmentView>\n  );\n};\n\nSegment.propTypes = {\n  origin: PropTypes.string.isRequired,\n  destination: PropTypes.string.isRequired,\n  date: PropTypes.string.isRequired,\n  stops: PropTypes.arrayOf(PropTypes.string).isRequired,\n  duration: PropTypes.number.isRequired,\n};\n\nexport default Segment;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport Segment from './Segment/Segment';\n\nconst TicketView = styled.div`\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px;\n  margin-bottom: 20px;\n`;\n\nconst TicketHeader = styled.div`\n  display: flex;\n  justify-content: space-between;\n`;\n\nconst Price = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 24px;\n  color: #2196F3;\n`;\n\nconst TicketSegments = styled.div``;\n\nconst CarrierLogo = styled.img`\n  margin-right: 30px;\n`;\n\nconst Ticket = ({ price, carrier, segments }) => (\n  <TicketView>\n    <TicketHeader>\n      <Price>{`${price.toLocaleString()} Р`}</Price>\n      <CarrierLogo\n        src={`https://pics.avs.io/99/36/${carrier}.png`}\n        alt={`Carrier ${carrier}`}\n        width=\"99\"\n        height=\"36\"\n      />\n    </TicketHeader>\n    <TicketSegments>\n      {segments.map((segment) => (\n        <Segment\n          key={`${segment.date}`}\n          {...segment}\n        />\n      ))}\n    </TicketSegments>\n  </TicketView>\n);\n\nTicket.propTypes = {\n  price: PropTypes.number.isRequired,\n  carrier: PropTypes.string.isRequired,\n  segments: PropTypes.arrayOf(PropTypes.object).isRequired,\n};\n\nexport default Ticket;\n","import React from 'react';\nimport styled from 'styled-components';\nimport * as PropTypes from 'prop-types';\nimport Ticket from '../Ticket/Ticket';\nimport '../../css/loadspiner.css';\n\nconst PlaceHolder = styled.div`\n  width: 502px;\n  height: 50px;\n  text-align: center;\n`;\n\nclass Tickets extends React.Component {\n  applyTicketFilters = (tickets) => {\n    const { filters } = this.props;\n    const enabledFiltersArray = Object.values(filters)\n      .map((elem, index) => ((elem === true) ? index : ''))\n      .filter((elem) => elem === 0 || elem);\n    return tickets.filter((ticket) => {\n      const { segments } = ticket;\n      const maxStops = segments.reduce((acc, segment) => (\n        acc < segment.stops.length ? segment.stops.length : acc\n      ), 0);\n      return enabledFiltersArray.includes(maxStops);\n    });\n  };\n\n  getFlightDuration = ({ segments }) => segments.reduce((acc, { duration }) => (acc + duration), 0);\n\n  doSortTickets = (tickets) => {\n    const { sortBy, sortVariants } = this.props;\n    return tickets.sort((ticketA, ticketB) => {\n      if (sortBy === sortVariants.PRICE) {\n        return ticketA.price - ticketB.price;\n      }\n      if (sortBy === sortVariants.DURATION) {\n        const durationA = this.getFlightDuration(ticketA);\n        const durationB = this.getFlightDuration(ticketB);\n        return durationA - durationB;\n      }\n      return null;\n    });\n  };\n\n  render() {\n    const { isAllLoaded, tickets, ticketsNumInList } = this.props;\n    const filteredTickets = this.applyTicketFilters(tickets);\n    const sortedTickets = this.doSortTickets(filteredTickets);\n    const ticketsToView = sortedTickets.slice(0, ticketsNumInList);\n\n    const ticketsList = (ticketsToView.length > 0) ? ticketsToView.map((ticket) => {\n      const { price, carrier, segments } = ticket;\n      const ticketId = `${segments[0].date}${price}`;\n      return (\n        <Ticket\n          key={ticketId}\n          price={price}\n          carrier={carrier}\n          segments={segments}\n          className=\"ticket\"\n        />\n      );\n    }) : <PlaceHolder>Ничего не найдено</PlaceHolder>;\n\n    const loadingMessage = (\n      <PlaceHolder>\n        Loading\n        <div className=\"spinner\">\n          <div className=\"bounce1\" />\n          <div className=\"bounce2\" />\n          <div className=\"bounce3\" />\n        </div>\n      </PlaceHolder>\n    );\n    return isAllLoaded ? ticketsList : loadingMessage;\n  }\n}\n\nTickets.propTypes = {\n  ticketsNumInList: PropTypes.number.isRequired,\n  filters: PropTypes.objectOf(PropTypes.bool).isRequired,\n  tickets: PropTypes.arrayOf(PropTypes.object).isRequired,\n  sortBy: PropTypes.string.isRequired,\n  isAllLoaded: PropTypes.bool.isRequired,\n  sortVariants: PropTypes.objectOf(PropTypes.string).isRequired,\n};\n\nexport default Tickets;\n","import React from 'react';\nimport styled, { createGlobalStyle } from 'styled-components';\nimport * as ReactDOM from 'react-dom';\nimport TicketService from '../../services/TicketService/TicketService';\nimport TransferFlightsFilter from '../TransferFlightsFilter/TransferFlightsFilter';\nimport FilterButtons from '../FilterButtons/FilterButtons';\nimport TicketsList from '../TicketsList/TicketsList';\nimport logo from '../../img/aviasales_logo.svg';\n\nconst GlobalStyle = createGlobalStyle`\n  body {\n    font-family: Open Sans, sans-serif;\n    background-color: #f3f7fa;\n    margin: 0;\n    padding: 0; \n  }\n`;\n\nconst AppStyle = styled.div`\n  margin: 0 auto;\n  padding: 0 10px;\n  padding-bottom: 30px;\n  width: 750px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 160px;\n`;\n\nconst Content = styled.div`\n  display: flex;\n  align-items: flex-start;\n  padding: 5px;\n`;\n\nconst ColLeft = styled.div`\n  display: flex;\n  width: 235px;\n  margin-right: 20px;\n`;\n\nconst ColRight = styled.div`\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n`;\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.sortVariants = {\n      PRICE: 'PRICE',\n      DURATION: 'DURATION',\n    };\n    this.state = {\n      isAllLoaded: false,\n      tickets: [],\n      sortBy: this.sortVariants.PRICE,\n      filters: {\n        noTransfer: true,\n        oneTransfer: true,\n        twoTransfers: true,\n        threeTransfers: true,\n      },\n    };\n    this.ticketsNumInList = 5;\n  }\n\n  async componentDidMount() {\n    this.service = new TicketService();\n    try {\n      const SearchId = await this.service.getSearchId();\n      await this.service.recursiveFetch(SearchId, this.onLoadStateUpdate);\n    } catch (error) {\n      return error;\n    }\n    return null;\n  }\n\n  onLoadStateUpdate = (chunkData, isStop) => {\n    this.setState((prevState) => ({\n      isAllLoaded: isStop,\n      tickets: [...prevState.tickets, ...chunkData],\n    }));\n  };\n\n  onFilterChange = (value) => {\n    const { filters } = this.state;\n    const newFilters = { ...filters };\n    if (value === 'all') {\n      const isAll = Object.values(filters).includes(false);\n      Object.keys(filters).forEach((item) => {\n        newFilters[item] = isAll;\n      });\n    } else {\n      newFilters[value] = !filters[value];\n    }\n    this.setState({ filters: newFilters });\n  };\n\n  onSortByChange = (value) => {\n    this.setState({ sortBy: this.sortVariants[value] });\n  };\n\n  render() {\n    const {\n      isAllLoaded,\n      tickets,\n      filters,\n      sortBy,\n    } = this.state;\n    return (\n      <AppStyle>\n        <GlobalStyle />\n        <Header>\n          <img alt=\"Aviasales\" src={logo} width=\"80\" height=\"80\" />\n        </Header>\n        <Content>\n          <ColLeft>\n            <TransferFlightsFilter\n              onChange={this.onFilterChange}\n              filters={filters}\n            />\n          </ColLeft>\n          <ColRight>\n            <FilterButtons\n              onChange={this.onSortByChange}\n              sortBy={sortBy}\n              sortVariants={this.sortVariants}\n            />\n            <TicketsList\n              isAllLoaded={isAllLoaded}\n              tickets={tickets}\n              filters={filters}\n              sortBy={sortBy}\n              sortVariants={this.sortVariants}\n              ticketsNumInList={this.ticketsNumInList}\n            />\n          </ColRight>\n        </Content>\n      </AppStyle>\n    );\n  }\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}