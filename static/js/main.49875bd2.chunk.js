(this.webpackJsonpasales=this.webpackJsonpasales||[]).push([[0],{27:function(n,e,t){n.exports=t.p+"static/media/checkmark.68ca57dc.svg"},31:function(n,e,t){n.exports=t.p+"static/media/aviasales_logo.0c089234.svg"},33:function(n,e,t){n.exports=t(58)},34:function(n,e,t){},57:function(n,e,t){},58:function(n,e,t){"use strict";t.r(e);t(34);var r=t(4),a=t.n(r),c=t(8),i=t(32),o=t(13),u=t(6),s=t(7),l=t(11),f=t(10),p=t(1),d=t(0),h=t.n(d),b=t(2),m=t(25),v=t(26),g=t(5),x=t.n(g);v.a();var k=function(){function n(){var e=this;Object(u.a)(this,n),this.serviceURL="https://front-test.beta.aviasales.ru",this.recursiveFetch=function(){var n=Object(c.a)(a.a.mark((function n(t,r){var c,i,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e.getDataChunk(t);case 3:if(c=n.sent,i=c.tickets,o=c.stop,r(i,o),o){n.next=10;break}return n.next=10,e.recursiveFetch(t,r);case 10:n.next=15;break;case 12:return n.prev=12,n.t0=n.catch(0),n.abrupt("return",n.t0);case 15:return n.abrupt("return",null);case 16:case"end":return n.stop()}}),n,null,[[0,12]])})));return function(e,t){return n.apply(this,arguments)}}()}return Object(s.a)(n,[{key:"getSearchId",value:function(){var n=Object(c.a)(a.a.mark((function n(){var e,t;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x()("".concat(this.serviceURL,"/search"));case 2:return e=n.sent,t=e.data,n.abrupt("return",t.searchId);case 5:case"end":return n.stop()}}),n,this)})));return function(){return n.apply(this,arguments)}}()},{key:"getDataChunk",value:function(){var n=Object(c.a)(a.a.mark((function n(e){var t,r;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,x()("".concat(this.serviceURL,"/tickets?searchId=").concat(e));case 2:return t=n.sent,r=t.data,n.abrupt("return",r);case 5:case"end":return n.stop()}}),n,this)})));return function(e){return n.apply(this,arguments)}}()}]),n}(),E=t(27),O=t.n(E);function y(){var n=Object(p.a)(["\n  margin-right: 10px;\n  margin-left: 20px;\n  height: ",";\n  width: ",";\n  box-sizing: border-box;\n  content: '';\n  border-radius: 2px;\n  border: 1px solid ",";\n  background-image: ",";\n  background-position: center center;\n  background-size: 12px 8px;\n  background-repeat: no-repeat;\n"]);return y=function(){return n},n}function j(){var n=Object(p.a)(["\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n"]);return j=function(){return n},n}function w(){var n=Object(p.a)(["\n  display: flex;\n  vertical-align: middle;\n"]);return w=function(){return n},n}var C=b.b.div(w()),T=b.b.input(j()),F=b.b.div(y(),(function(n){return n.size||"20px"}),(function(n){return n.size||"20px"}),(function(n){return n.checked?"#2196f3":"#9ABBCE"}),(function(n){return n.checked?"url(".concat(O.a,")"):"none"})),I=function(n){var e=n.name,t=n.checked,r=n.onChange;return h.a.createElement(C,null,h.a.createElement(T,{type:"checkbox",name:e,checked:t,onChange:r}),h.a.createElement(F,{checked:t}))};function A(){var n=Object(p.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  height: 40px;\n  color: #4a4a4a;\n  font-size: 13px;\n  font-style: normal;\n  font-weight: normal;\n  line-height: 20px;\n  cursor: pointer;\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n  \n  &:hover {\n    background: #F1FCFF;\n  }  \n"]);return A=function(){return n},n}function L(){var n=Object(p.a)(["\n  text-align: center;\n  font-size: 12px;\n  font-style: normal;\n  font-weight: 600;\n  letter-spacing: 0.5px;\n  line-height: 12px;\n  margin-bottom: 20px;\n  margin-top: 0;\n  text-transform: uppercase;\n"]);return L=function(){return n},n}function B(){var n=Object(p.a)(["\n  background: #FFFFFF;\n  min-width: 232px;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px 0px;\n"]);return B=function(){return n},n}var N=b.b.form(B()),R=b.b.div(L()),S=b.b.label(A()),D=function(n){var e=n.onChange,t=n.filters,r=!Object.values(t).includes(!1);return h.a.createElement(N,null,h.a.createElement(R,null,"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),h.a.createElement(S,{key:"all"},h.a.createElement(I,{name:"transfer",value:"all",checked:r,onChange:function(){return e("all")}}),"\u0412\u0441\u0435"),h.a.createElement(S,{key:"noTransfer"},h.a.createElement(I,{name:"transfer",checked:t.noTransfer,onChange:function(){return e("noTransfer")}}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),h.a.createElement(S,{key:"oneTransfer"},h.a.createElement(I,{name:"transfer",checked:t.oneTransfer,onChange:function(){return e("oneTransfer")}}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430"),h.a.createElement(S,{key:"twoTransfer"},h.a.createElement(I,{name:"transfer",checked:t.twoTransfers,onChange:function(){return e("twoTransfers")}}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"),h.a.createElement(S,{key:"threeTransfer"},h.a.createElement(I,{name:"transfer",checked:t.threeTransfers,onChange:function(){return e("threeTransfers")}}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))};function U(){var n=Object(p.a)(["\n  flex-grow: 1;\n  cursor: pointer;\n  text-align: center;\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n  line-height: 20px;\n  padding: 15px 0px;\n  letter-spacing: 0.5px;\n  justify-content: center;\n  color: ",";\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: ",";;\n"]);return U=function(){return n},n}var z=b.b.button(U(),(function(n){return n.active?"#fff":"#4a4a4a"}),(function(n){return n.active?"#2196f3":"#fff"}),(function(n){return n.active?"#2196f3":"#dfe5ec"}),(function(n){return 1===n.btnPos?"5px 0 0 5px":"0 5px 5px 0"})),P=function(n){return h.a.createElement(z,n)};function V(){var n=Object(p.a)(["\n  display: flex;\n  flex-direction: row;\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n  border-radius: 5px;\n"]);return V=function(){return n},n}var M=b.b.div(V()),J=function(n){var e=n.sortBy,t=n.onChange,r=n.sortVariants;return h.a.createElement(M,null,h.a.createElement(P,{type:"button",btnPos:1,active:e===r.PRICE,onClick:function(){return t(r.PRICE)}},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),h.a.createElement(P,{type:"button",btnPos:2,active:e===r.DURATION,onClick:function(){return t(r.DURATION)}},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))};function H(){var n=Object(p.a)(["\n  font-size: 14px;\n  line-height: 21px;\n  color: #4A4A4A;\n"]);return H=function(){return n},n}function _(){var n=Object(p.a)(["\n  font-size: 12px;\n  line-height: 18px;\n  letter-spacing: 0.5px;\n  color: #A0B0B9;\n  text-transform: uppercase;\n"]);return _=function(){return n},n}function q(){var n=Object(p.a)(["\n  width: 33.3333%;\n"]);return q=function(){return n},n}function G(){var n=Object(p.a)(["\n  padding-top: 10px;\n  display: flex;\n  flex-direction: row;\n  font-weight: 600;\n"]);return G=function(){return n},n}var K=b.b.div(G()),Q=b.b.div(q()),W=b.b.span(_()),X=b.b.span(H()),Y=function(n){var e=n.getUTCHours(),t=n.getUTCMinutes();return"".concat(e<10?"0".concat(e):e,":")+"".concat(t<10?"0".concat(t):t)},Z=function(n){var e=n.origin,t=n.destination,r=n.date,a=n.stops,c=n.duration,i=new Date(r),o=new Date(i.getTime()+60*c*1e3);return h.a.createElement(K,null,h.a.createElement(Q,null,h.a.createElement(W,null,"".concat(e," - ").concat(t," ")),h.a.createElement("br",null),h.a.createElement(X,null,"".concat(Y(i)," - ").concat(Y(o)))),h.a.createElement(Q,null,h.a.createElement(W,null,"\u0412 \u041f\u0423\u0422\u0418"),h.a.createElement("br",null),h.a.createElement(X,null,"".concat(function(n){var e=Math.trunc(n/60),t=n-60*e;return"".concat(e<10?"0".concat(e):e,"\u0447")+" ".concat(t<10?"0".concat(t):t,"\u043c")}(c)))),h.a.createElement(Q,null,h.a.createElement(W,null,"".concat(function(n){var e="";switch(n.toString()){case"1":e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430";break;case"2":case"3":case"4":e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438";break;default:e="\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"}return n>0?"".concat(n," ").concat(e):"\u0411\u0435\u0437 ".concat(e)}(a.length))),h.a.createElement("br",null),h.a.createElement(X,null,"".concat(a))))};function $(){var n=Object(p.a)(["\n  margin-right: 30px;\n"]);return $=function(){return n},n}function nn(){var n=Object(p.a)([""]);return nn=function(){return n},n}function en(){var n=Object(p.a)(["\n  font-style: normal;\n  font-weight: 600;\n  font-size: 24px;\n  line-height: 24px;\n  color: #2196F3;\n"]);return en=function(){return n},n}function tn(){var n=Object(p.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return tn=function(){return n},n}function rn(){var n=Object(p.a)(["\n  background: #FFF;\n  box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  padding: 20px;\n  margin-bottom: 20px;\n"]);return rn=function(){return n},n}var an=b.b.div(rn()),cn=b.b.div(tn()),on=b.b.div(en()),un=b.b.div(nn()),sn=b.b.img($()),ln=function(n){var e=n.price,t=n.carrier,r=n.segments;return h.a.createElement(an,null,h.a.createElement(cn,null,h.a.createElement(on,null,"".concat(e.toLocaleString()," \u0420")),h.a.createElement(sn,{src:"https://pics.avs.io/99/36/".concat(t,".png"),alt:"Carrier ".concat(t),width:"99",height:"36"})),h.a.createElement(un,null,r.map((function(n){return h.a.createElement(Z,Object.assign({key:"".concat(n.date)},n))}))))};t(57);function fn(){var n=Object(p.a)(["\n  width: 502px;\n  height: 50px;\n  text-align: center;\n"]);return fn=function(){return n},n}var pn=b.b.div(fn()),dn=function(n){Object(l.a)(t,n);var e=Object(f.a)(t);function t(){var n;Object(u.a)(this,t);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(n=e.call.apply(e,[this].concat(a))).applyTicketFilters=function(e){var t=n.props.filters,r=Object.values(t).map((function(n,e){return!0===n?e:""})).filter((function(n){return 0===n||n}));return e.filter((function(n){var e=n.segments.reduce((function(n,e){return n<e.stops.length?e.stops.length:n}),0);return r.includes(e)}))},n.getFlightDuration=function(n){return n.segments.reduce((function(n,e){return n+e.duration}),0)},n.doSortTickets=function(e){var t=n.props,r=t.sortBy,a=t.sortVariants;return e.sort((function(e,t){return r===a.PRICE?e.price-t.price:r===a.DURATION?n.getFlightDuration(e)-n.getFlightDuration(t):null}))},n}return Object(s.a)(t,[{key:"render",value:function(){var n=this.props,e=n.isAllLoaded,t=n.tickets,r=n.ticketsNumInList,a=this.applyTicketFilters(t),c=this.doSortTickets(a).slice(0,r),i=c.length>0?c.map((function(n){var e=n.price,t=n.carrier,r=n.segments,a="".concat(r[0].date).concat(e);return h.a.createElement(ln,{key:a,price:e,carrier:t,segments:r,className:"ticket"})})):h.a.createElement(pn,null,"\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");return e?i:h.a.createElement(pn,null,"Loading",h.a.createElement("div",{className:"spinner"},h.a.createElement("div",{className:"bounce1"}),h.a.createElement("div",{className:"bounce2"}),h.a.createElement("div",{className:"bounce3"})))}}]),t}(h.a.Component),hn=t(31),bn=t.n(hn);function mn(){var n=Object(p.a)(["\n  display: flex;\n  flex: 1;\n  flex-direction: column;\n"]);return mn=function(){return n},n}function vn(){var n=Object(p.a)(["\n  display: flex;\n  width: 235px;\n  margin-right: 20px;\n"]);return vn=function(){return n},n}function gn(){var n=Object(p.a)(["\n  display: flex;\n  align-items: flex-start;\n  padding: 5px;\n"]);return gn=function(){return n},n}function xn(){var n=Object(p.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 160px;\n"]);return xn=function(){return n},n}function kn(){var n=Object(p.a)(["\n  margin: 0 auto;\n  padding: 0 10px;\n  padding-bottom: 30px;\n  width: 750px;\n"]);return kn=function(){return n},n}function En(){var n=Object(p.a)(["\n  body {\n    font-family: Open Sans, sans-serif;\n    background-color: #f3f7fa;\n    margin: 0;\n    padding: 0; \n  }\n"]);return En=function(){return n},n}var On=Object(b.a)(En()),yn=b.b.div(kn()),jn=b.b.div(xn()),wn=b.b.div(gn()),Cn=b.b.div(vn()),Tn=b.b.div(mn()),Fn=function(n){Object(l.a)(t,n);var e=Object(f.a)(t);function t(n){var r;return Object(u.a)(this,t),(r=e.call(this,n)).onLoadStateUpdate=function(n,e){r.setState((function(t){return{isAllLoaded:e,tickets:[].concat(Object(o.a)(t.tickets),Object(o.a)(n))}}))},r.onFilterChange=function(n){var e=r.state.filters,t=Object(i.a)({},e);if("all"===n){var a=Object.values(e).includes(!1);Object.keys(e).forEach((function(n){t[n]=a}))}else t[n]=!e[n];r.setState({filters:t})},r.onSortByChange=function(n){r.setState({sortBy:r.sortVariants[n]})},r.sortVariants={PRICE:"PRICE",DURATION:"DURATION"},r.state={isAllLoaded:!1,tickets:[],sortBy:r.sortVariants.PRICE,filters:{noTransfer:!0,oneTransfer:!0,twoTransfers:!0,threeTransfers:!0}},r.ticketsNumInList=5,r}return Object(s.a)(t,[{key:"componentDidMount",value:function(){var n=Object(c.a)(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this.service=new k,n.prev=1,n.next=4,this.service.getSearchId();case 4:return e=n.sent,n.next=7,this.service.recursiveFetch(e,this.onLoadStateUpdate);case 7:n.next=12;break;case 9:return n.prev=9,n.t0=n.catch(1),n.abrupt("return",n.t0);case 12:return n.abrupt("return",null);case 13:case"end":return n.stop()}}),n,this,[[1,9]])})));return function(){return n.apply(this,arguments)}}()},{key:"render",value:function(){var n=this.state,e=n.isAllLoaded,t=n.tickets,r=n.filters,a=n.sortBy;return h.a.createElement(yn,null,h.a.createElement(On,null),h.a.createElement(jn,null,h.a.createElement("img",{alt:"Aviasales",src:bn.a,width:"80",height:"80"})),h.a.createElement(wn,null,h.a.createElement(Cn,null,h.a.createElement(D,{onChange:this.onFilterChange,filters:r})),h.a.createElement(Tn,null,h.a.createElement(J,{onChange:this.onSortByChange,sortBy:a,sortVariants:this.sortVariants}),h.a.createElement(dn,{isAllLoaded:e,tickets:t,filters:r,sortBy:a,sortVariants:this.sortVariants,ticketsNumInList:this.ticketsNumInList}))))}}]),t}(h.a.Component);m.render(h.a.createElement(Fn,null),document.getElementById("root"))}},[[33,1,2]]]);
//# sourceMappingURL=main.49875bd2.chunk.js.map